###
# 静的銀河では没落帝国用の生成機能が働かないので
# 専用のinitializerを用意して銀河生成後に後から作らせるようにする
#
# 基本的には以下のファイルと同じ
# common\solar_system_initializers\fallen_empire_initializers.txt
#
# 変更点
# ・usage_odds = 0
# ・rootスコープを全て没落帝国のグローバルスコープと置き換える
# ・common\fallen_empires\00_fallen_empire.txtのcreate_country_effectを直接呼ぶ
# ・基地はcreate_fe_home_citadelやcreate_fe_outpostではなく、
#   書き直したstatic_create_fe_home_citadelやstatic_create_fe_outpostを記載する
# ・neighbor_systemは動作しないので消去
###
@base_moon_distance = 10

# Home System I
static_fallen_1 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"

	usage_odds = 0 # Mod追加コード

	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		name = "NAME_Great_Nexus"
		orbit_distance = 15
		class = pc_city
		orbit_angle = { min = 90 max = 270 }
		size = 20
		deposit_blockers = none
		modifiers = none
		has_ring = no

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 1 }
			name = "NAME_Wanderer"
			class = pc_barren
			size = 8
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

		init_effect = {
			###
			# ここからMod追加コード
			# 以下のファイルのcreate_country_effectの部分を拝借
			# common\fallen_empires\00_fallen_empire.txt
			###
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				extra_trait_points = 3
				allow_negative_traits = no
			}
			last_created_species = {
				modify_species = {
					species = this
					add_trait = trait_cybernetic
				}
			}
			if = {
				limit = {
					has_machine_age_dlc = yes
				}
				last_created_species = {
					set_random_cybernetic_portrait_effect = yes
				}
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_imperial
				civics = {
					civic = civic_lethargic_leadership
					civic = civic_empire_in_decline
				}
				species = last_created_species
				ethos = {
					ethic = ethic_fanatic_materialist
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					save_global_event_target_as = fallen_empire_1
					set_country_flag = fallen_empire_1
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Enforcer"
					add_global_ship_design = "NAME_Savant"
					add_global_ship_design = "NAME_Scholar"
					add_global_ship_design = "NAME_Sage"
					add_global_ship_design = "NAME_Cloaker"
					add_global_ship_design = "NAME_Librarian"
					add_global_ship_design = "NAME_Seeker"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}
			###
			# ここまでMod追加コード
			###

			create_cluster = {
				id = fe1_cluster
				radius = 120
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_1
			set_controller = event_target:fallen_empire_1
			set_capital = yes

			add_building = building_ancient_palace
			add_building = building_fe_security_2
			add_building = building_fe_stronghold
			add_building = building_affluence_center
			add_building = building_fe_entertainment_2
			add_building = building_nourishment_center
			add_building = building_fe_lab_2
			add_building = building_class_4_singularity
			add_building = building_dimensional_fabricator
			add_building = building_fe_mine_2
			add_building = building_nano_forge
			add_building = building_fe_administration_2

			while = {
				count = 20
				add_district = district_arcology_housing
			}
			while = {
				count = 94
				create_pop = {
					species = owner_main_species
				}
			}
			event_target:fallen_empire_1 = {
				set_policy = {
					policy = artificial_intelligence_policy
					option = ai_servitude
					cooldown = no
				}
				set_policy = {
					policy = robot_pop_policy
					option = robot_pops_allowed
					cooldown = no
				}
			}
			event_target:fallen_empire_1 = { create_fe_servant_robots = yes }
			last_created_species = { save_event_target_as = fe_servants }
			while = {
				count = 94
				create_pop = {
					species = event_target:fe_servants
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:fallen_empire_1
					species = event_target:fallen_empire_1
					type = "robotic_army"
				}
			}
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 25
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}


	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 35
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 2 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 10
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_1_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_2"
	}

	init_effect = {
		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_1 } # Mod修正箇所
	}
}

static_fallen_1_2 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 40

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 15
		class = pc_molten
		size = { min = 8 max = 16 }
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		name = "NAME_The_Archives"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 15
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_1
			set_controller = event_target:fallen_empire_1

			add_building = building_ancient_palace
			add_building = building_master_archive
			add_building = building_fe_stronghold
			add_building = building_fe_dome
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_fe_lab_2
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_fe_lab_2
			while = {
				count = 15
				add_district = district_city
			}
			while = {
				count = 35
				create_pop = {
					species = owner_main_species
				}
			}
			while = {
				count = 35
				create_pop = {
					species = event_target:fe_servants
				}
			}
		}
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_1 } # Mod修正箇所
	}
}

# Home System II
static_fallen_2 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "NAME_Celestial_Throne"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 30
		deposit_blockers = none
		modifiers = none

		init_effect = {
			###
			# ここからMod追加コード
			# 以下のファイルのcreate_country_effectの部分を拝借
			# common\fallen_empires\00_fallen_empire.txt
			###
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				extra_trait_points = 3
				allow_negative_traits = no
			}
			last_created_species = {
				modify_species = {
					species = this
					add_trait = trait_psionic
				}
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_imperial
				civics = {
					civic = civic_lethargic_leadership
					civic = civic_empire_in_decline
				}
				species = last_created_species
				ethos = {
					ethic = ethic_fanatic_spiritualist
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					save_global_event_target_as = fallen_empire_2
					set_country_flag = fallen_empire_2
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Cleanser"
					add_global_ship_design = "NAME_Eternal"
					add_global_ship_design = "NAME_Avatar"
					add_global_ship_design = "NAME_Zealot"
					add_global_ship_design = "NAME_Penitent"
					add_global_ship_design = "NAME_Faith"
					add_global_ship_design = "NAME_Pilgrim"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}
			###
			# ここまでMod追加コード
			###

			create_cluster = {
				id = fe2_cluster
				radius = 140
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_2
			set_controller = event_target:fallen_empire_2
			set_capital = yes

			add_building = building_ancient_palace
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_fe_temple_2
			add_building = building_fe_temple_2
			add_building = building_fe_mine_2
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_dimensional_fabricator
			add_building = building_class_4_singularity
			add_building = building_affluence_center
			add_building = building_nano_forge

			while = {
				count = 16
				add_district = district_city
			}
			while = {
				count = 7
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			while = {
				count = 7
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			while = {
				count = 115
				create_pop = {
					species = owner_main_species
				}
			}
			create_fallen_empire_starting_navy = yes
			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:fallen_empire_2
					species = event_target:fallen_empire_2
					type = "psionic_army"
				}
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			name = "NAME_The_Mistake"
			class = "pc_broken"
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
			modifiers = none

			init_effect = { prevent_anomaly = yes }
		}
	}

	planet = {
		name = "NAME_Sky_Temple"
		orbit_distance = 30
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 22
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_2
			set_controller = event_target:fallen_empire_2

			add_building = building_ancient_palace
			add_building = building_empyrean_shrine
			add_building = building_fe_dome
			add_building = building_fe_dome
			add_building = building_dimensional_fabricator
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_nano_forge
			add_building = building_nano_forge
			while = {
				count = 12
				add_district = district_city
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_mining
				}
			}
			while = {
				count = 5
				add_district_and_planet_size_if_needed_effect = {
					district = district_farming
				}
			}
			while = {
				count = 68
				create_pop = {
					species = owner_main_species
				}
			}
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_2"
	}
	neighbor_system = {
		distance = { min = 30 max = 100 }
		initializer = "fallen_holy_01"
	}
	neighbor_system = {
		distance = { min = 50 max = 150 }
		initializer = "fallen_holy_02"
	}
	neighbor_system = {
		distance = { min = 80 max = 200 }
		initializer = "fallen_holy_03"
	}
	neighbor_system = {
		distance = { min = 120 max = 250 }
		initializer = "fallen_holy_04"
	}
	neighbor_system = {
		spawn_chance = 25
		distance = { min = 0 max = 30 }
		initializer = "fallen_shrouded"
	}

	init_effect = {
		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_2 }
	}
}

# Home System III
static_fallen_3 = {
	usage = fallen_empire_init
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 1 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		name = "NAME_Sky_Father"
		class = "pc_gas_giant"
		orbit_distance = 60
		orbit_angle = 200
		size = 30
		has_ring = no

		change_orbit = @base_moon_distance

		moon = {
			name = "NAME_Cradle"
			class = "pc_gaia"
			size = 20
			orbit_distance = 5
			orbit_angle = 20
			deposit_blockers = none
			modifiers = none

			init_effect = {
				###
				# ここからMod追加コード
				# 以下のファイルのcreate_country_effectの部分を拝借
				# common\fallen_empires\00_fallen_empire.txt
				###
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = random
					extra_trait_points = 5
					allow_negative_traits = no
				}
				create_country = {
					name = random
					type = fallen_empire
					ignore_initial_colony_error = yes
					authority = auth_imperial
					civics = {
						civic = civic_lethargic_leadership
						civic = civic_empire_in_decline
					}
					species = last_created_species
					ethos = {
						ethic = ethic_fanatic_xenophile
					}
					flag = random
					origin = "origin_fallen_empire"
					effect = {
						save_global_event_target_as = fallen_empire_3
						set_country_flag = fallen_empire_3
						add_resource = {
							minerals = 10000
							energy = 10000
							food = 1000
							influence = 500
						}
						# must initialize global designs here
						add_global_ship_design = "NAME_Adjuster"
						add_global_ship_design = "NAME_Keeper"
						add_global_ship_design = "NAME_Custodian"
						add_global_ship_design = "NAME_Overseer"
						add_global_ship_design = "NAME_Watcher"
						add_global_ship_design = "NAME_Seeder"
						add_global_ship_design = "NAME_Builder"
						add_global_ship_design = "NAME_FE_Starbase"
					}
				}
				###
				# ここまでMod追加コード
				###

				create_cluster = {
					id = fe3_cluster
					radius = 120
					center = this.solar_system
				}

				set_planet_flag = fallen_empire_world
				set_planet_flag = fallen_empire_capital
				prevent_anomaly = yes
				set_owner = event_target:fallen_empire_3
				set_controller = event_target:fallen_empire_3
				set_capital = yes

				add_building = building_ancient_palace
				add_building = building_fe_dome
				add_building = building_fe_administration_2
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_dimensional_fabricator
				add_building = building_fe_security_2
				add_building = building_fe_mine_2
				while = {
					count = 20
					add_district = district_city
				}
				while = {
					count = 52
					create_pop = {
						species = owner_main_species
					}
				}
				event_target:fallen_empire_3 = {
					set_policy = {
						policy = artificial_intelligence_policy
						option = ai_outlawed
						cooldown = no
					}
					set_policy = {
						policy = robot_pop_policy
						option = robot_pops_allowed
						cooldown = no
					}
				}
				event_target:fallen_empire_3 = { create_fe_servant_robots = yes }
				last_created_species = { save_event_target_as = fe_servants }
				while = {
					count = 52
					create_pop = {
						species = event_target:fe_servants
					}
				}
				create_fallen_empire_starting_navy = yes

				while = {
					count = 20
					create_army = {
						name = random
						owner = event_target:fallen_empire_3
						species = event_target:fallen_empire_3
						type = "gene_warrior_army"
					}
				}
			}
		}

		moon = {
			name = "NAME_Sister"
			class = "pc_broken"
			size = 13
			orbit_distance = 5
			orbit_angle = 50

			init_effect = { prevent_anomaly = yes }
		}

		moon = {
			name = "NAME_Brother"
			class = "pc_gaia"
			size = 10
			orbit_distance = 8
			orbit_angle = 10
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = event_target:fallen_empire_3
				set_controller = event_target:fallen_empire_3

				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_dimensional_fabricator
				add_building = building_dimensional_fabricator
				add_building = building_nano_forge
				add_building = building_nano_forge
				add_building = building_nano_forge
				while = {
					count = 10
					add_district = district_city
				}
				while = {
					count = 18
					create_pop = {
						species = owner_main_species
					}
				}
				while = {
					count = 18
					create_pop = {
						species = event_target:fe_servants
					}
				}
			}
		}

		moon = {
			name = "NAME_Mother"
			class = "pc_gaia"
			size = 12
			orbit_distance = 5
			orbit_angle = 190
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = event_target:fallen_empire_3
				set_controller = event_target:fallen_empire_3

				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_dome
				add_building = building_fe_market_2
				add_building = building_class_4_singularity
				add_building = building_class_4_singularity
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_affluence_center
				add_building = building_fe_clinic_2
				add_building = building_nourishment_center
				while = {
					count = 12
					add_district = district_city
				}
				while = {
					count = 27
					create_pop = {
						species = owner_main_species
					}
				}
				while = {
					count = 27
					create_pop = {
						species = event_target:fe_servants
					}
				}
			}
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_xeno_zoo"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_2"
	}

	init_effect = {
		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_3 }
	}
}

# Home System IV
static_fallen_4 = {
	usage = fallen_empire_init
	usage_odds = 0 # Mod追加コード
	class = "rl_standard_stars"
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 50
	}

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 50

	planet = {
		count = { min = 0 max = 3 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 40 max = 100 }
	}

	planet = {
		count = { min = 0 max = 3 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		name = "NAME_The_Core"
		orbit_distance = 20
		class = pc_gaia
		orbit_angle = { min = 90 max = 270 }
		size = 25
		deposit_blockers = none
		modifiers = none
		has_ring = no

		init_effect = {
			###
			# ここからMod追加コード
			# 以下のファイルのcreate_country_effectの部分を拝借
			# common\fallen_empires\00_fallen_empire.txt
			###
			create_species = {
				name = random
				class = random_non_machine
				portrait = random
				traits = random
				extra_trait_points = 5
				allow_negative_traits = no
				effect = { save_global_event_target_as = fallen_4_species }
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_imperial
				civics = {
					civic = civic_lethargic_leadership
					civic = civic_empire_in_decline
				}
				species = last_created_species
				ethos = {
					ethic = ethic_fanatic_xenophobe
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					save_global_event_target_as = fallen_empire_4
					set_country_flag = fallen_empire_4
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Reaper"
					add_global_ship_design = "NAME_Imperium"
					add_global_ship_design = "NAME_Supremacy"
					add_global_ship_design = "NAME_Glory"
					add_global_ship_design = "NAME_Devastator"
					add_global_ship_design = "NAME_Servitor"
					add_global_ship_design = "NAME_Destiny"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}
			###
			# ここまでMod追加コード
			###

			create_cluster = {
				id = fe4_cluster
				radius = 100
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			set_planet_flag = xenophobe_fe_capital
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_4
			set_controller = event_target:fallen_empire_4
			set_capital = yes

			add_building = building_ancient_palace
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_fe_stronghold
			add_building = building_affluence_center
			add_building = building_nourishment_center
			add_building = building_fe_security_2
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_dimensional_fabricator
			add_building = building_nano_forge
			add_building = building_nano_forge
			while = {
				count = 25
				add_district = district_city
			}
			while = {
				count = 62
				create_pop = {
					species = owner_main_species
				}
			}
			event_target:fallen_empire_4 = { static_create_fe_servant_species = { COUNTRY = event_target:fallen_empire_4 } }
			last_created_species = { save_event_target_as = fe_servants }
			while = {
				count = 62
				create_pop = {
					species = event_target:fe_servants
				}
			}
			create_fallen_empire_starting_navy = yes

			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:fallen_empire_4
					species = event_target:fallen_empire_4
					type = "xenomorph_army"
				}
			}
		}

		moon = {
			name = "NAME_Boundary"
			class = "pc_gaia"
			size = 12
			orbit_distance = 14
			orbit_angle = 10
			deposit_blockers = none
			modifiers = none

			init_effect = {
				set_planet_flag = fallen_empire_world
				prevent_anomaly = yes
				set_owner = event_target:fallen_empire_4
				set_controller = event_target:fallen_empire_4

				add_building = building_ancient_palace
				add_building = building_fe_stronghold
				add_building = building_fe_stronghold
				add_building = building_affluence_center
				add_building = building_nourishment_center
				add_building = building_fe_mine_2
				add_building = building_fe_security_2
				add_building = building_class_4_singularity
				add_building = building_dimensional_fabricator
				add_building = building_fe_administration_2
				add_building = building_nano_forge
				add_building = building_nano_forge
				while = {
					count = 12
					add_district = district_city
				}
				while = {
					count = 33
					create_pop = {
						species = owner_main_species
					}
				}
				while = {
					count = 33
					create_pop = {
						species = event_target:fe_servants
					}
				}
			}
		}
	}

	planet = {
		count = { min = 2 max = 4 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_orbitals_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_shielded_1"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_shielded_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_shielded_3"
	}

	init_effect = {
		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_4 }
	}
}

static_fallen_1_col_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_1
		COUNTRY = event_target:fallen_empire_1
	}
}

static_fallen_2_col_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_1
		COUNTRY = event_target:fallen_empire_2
	}
}

static_fallen_3_col_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_1
		COUNTRY = event_target:fallen_empire_3
	}
}

static_fallen_4_col_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_1
		COUNTRY = event_target:fallen_empire_4
	}
}

static_fallen_1_col_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_2
		COUNTRY = event_target:fallen_empire_1
	}
}

static_fallen_2_col_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_2
		COUNTRY = event_target:fallen_empire_2
	}
}

static_fallen_3_col_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_2
		COUNTRY = event_target:fallen_empire_3
	}
}

static_fallen_4_col_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_col_2
		COUNTRY = event_target:fallen_empire_4
	}
}

static_fallen_1_orbitals_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_1
		COUNTRY = event_target:fallen_empire_1
	}
}

static_fallen_2_orbitals_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_1
		COUNTRY = event_target:fallen_empire_2
	}
}

static_fallen_3_orbitals_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_1
		COUNTRY = event_target:fallen_empire_3
	}
}

static_fallen_4_orbitals_1 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_1
		COUNTRY = event_target:fallen_empire_4
	}
}

static_fallen_1_orbitals_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_2
		COUNTRY = event_target:fallen_empire_1
	}
}

static_fallen_2_orbitals_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_2
		COUNTRY = event_target:fallen_empire_2
	}
}

static_fallen_3_orbitals_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_2
		COUNTRY = event_target:fallen_empire_3
	}
}

static_fallen_4_orbitals_2 = {
	inline_script = {
		script = solar_system_initializers/static_fallen_orbitals_2
		COUNTRY = event_target:fallen_empire_4
	}
}


# Shrouded Planet
static_fallen_shrouded = {
	class = sc_black_hole
	usage_odds = 0 # Mod追加コード
	flags = { fallen_shrouded }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = 1
		orbit_distance = 15
		class = pc_barren_cold
		size = 15
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 30
		class = pc_shrouded
		name = "NAME_Apostasy"
		orbit_angle = { min = 90 max = 270 }
		size = 22
		modifiers = none
	}

	planet = {
		count = 1
		orbit_distance = 40
		size = 12
		class = pc_frozen
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = pc_frozen
		orbit_angle = { min = 90 max = 270 }
		size = 25
		change_orbit = @base_moon_distance

		moon = {
			count = 1
			class = pc_barren_cold
			size = 7
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}

	}

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}

		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_2 }
	}
}

# Shielded Planet 1
static_fallen_shielded_1 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	flags = { fallen_shielded_1 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = rl_habitable_normal
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_4 }
	}
}

# Shielded Planet 2
static_fallen_shielded_2 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	flags = { fallen_shielded_2 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = rl_habitable_normal
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_4 }
	}
}

# Shielded Planet 3
static_fallen_shielded_3 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	flags = { fallen_shielded_3 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 35

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 15
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
		size = 16
		modifiers = none
		flags = { fallen_shield_world }

		init_effect = {
			prevent_anomaly = yes
			change_pc = {
				class = pc_shielded
				inherit_entity = yes
			}
		}

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 1 max = 3 }
		orbit_distance = 25
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 20
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 3 }
			class = random_non_colonizable
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	planet = {
		count = { min = 0 max = 1 }
		orbit_distance = 20
		class = random_non_colonizable
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_4 }
	}
}

# Fallen Empire's Holy World 1
static_fallen_holy_01 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード

	flags = { holy_system_1 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		orbit_distance = 30
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 18
		name = "NAME_Walled_Garden"
		deposit_blockers = none
		flags = { holy_world_1 }

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 2 max = 10 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 2
static_fallen_holy_02 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 95
	}

	flags = { holy_system_2 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 30

	planet = {
		count = 2
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 25

	planet = {
		count = { min = 1 max = 4 }
		class = pc_asteroid
		orbit_distance = 0
		orbit_angle = { min = 90 max = 270 }
	}

	planet = {
		count = 1
		orbit_distance = 25
		class = "pc_gaia"
		orbit_angle = { min = 90 max = 270 }
		size = 14
		name = "NAME_Emerald_Mausoleum"
		deposit_blockers = none
		flags = { holy_world_2 }

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 2 max = 5 }
		orbit_distance = 30
		orbit_angle = { min = 90 max = 270 }

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 0 max = 1 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 5
		}
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 3
static_fallen_holy_03 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	flags = { holy_system_3 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 45

	planet = {
		count = 1
		orbit_distance = 10
		class = "pc_gaia"
		name = "NAME_Pristine_Jewel"
		deposit_blockers = none
		orbit_angle = { min = 90 max = 270 }
		flags = { holy_world_3 }
		size = 10

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	planet = {
		count = { min = 1 max = 2 }
		orbit_distance = 60
		class = pc_gas_giant
		orbit_angle = { min = 90 max = 270 }
		size = 25

		change_orbit = @base_moon_distance

		moon = {
			count = { min = 1 max = 4 }
			size = { min = 8 max = 20 }
			orbit_angle = { min = 90 max = 270 }
			orbit_distance = 6
		}
	}

	change_orbit = 20

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire's Holy World 4
static_fallen_holy_04 = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 120
	}

	flags = { holy_system_4 }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 150

	planet = {
		count = 1
		orbit_distance = 10
		class = "pc_gaia"
		name = "NAME_Prophets_Retreat"
		deposit_blockers = none
		orbit_angle = { min = 90 max = 270 }
		flags = { holy_world_4 }
		size = 25

		init_effect = {
			prevent_anomaly = yes
			add_modifier = {
				modifier = "holy_planet"
				days = -1
			}
			create_ambient_object = {
				type = consecrated_planet_stage_3_object
				location = this

				use_3d_location = yes
				entity_scale_to_size = yes
			}
		}
	}

	change_orbit = -110

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	change_orbit = 110

	planet = {
		count = { min = 0 max = 2 }
		orbit_distance = 40
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		random_list = { # 30% chance outpost is "broken"
			30 = {
				random_system_planet = {
					limit = { is_star = yes }
					create_broken_fe_outpost = yes
				}
			}
			70 = {}
		}
	}
}

# Fallen Empire Xeno Zoo
static_fallen_xeno_zoo = {
	class = "rl_standard_stars"
	usage_odds = 0 # Mod追加コード
	asteroid_belt = {
		type = rocky_asteroid_belt
		radius = 80
	}

	flags = { fe_xeno_zoo }

	planet = {
		count = 1
		class = star
		orbit_distance = 0
		orbit_angle = 1
		size = { min = 20 max = 30 }
		has_ring = no
	}

	change_orbit = 70

	planet = {
		count = 1
		orbit_distance = 15
		class = "pc_gaia"
		name = "NAME_The_Preserve"
		orbit_angle = { min = 90 max = 270 }
		size = 20

		orbit_angle = 60
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_3
			set_planet_flag = fe_the_preserve
			add_building = building_fe_xeno_zoo

			while = {
				count = 2
				create_pop = {
					species = owner_main_species
				}
			}

			while = {
				count = 5
				create_species = {
					name = random
					class = random_non_machine
					portrait = random
					traits = random
				}
				create_pop = {
					species = last_created_species
				}
			}
		}
	}

	change_orbit = -45

	planet = {
		count = { min = 1 max = 1 }
		orbit_distance = 20
		orbit_angle = { min = 90 max = 270 }
	}

	init_effect = {
		static_create_fe_citadel = { COUNTRY = event_target:fallen_empire_3 }
	}
}

# Home System - Machine
static_fallen_machine = {
	usage = fallen_empire_init
	name = "NAME_Alpha_Refuge"
	class = "rl_standard_stars"

	flags = { ring_world_built }
	usage_odds = 0 # Mod追加コード

	init_effect = {
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = -90
			orbit_distance = 45
		}

		static_create_fe_home_citadel = { COUNTRY = event_target:fallen_empire_machine }  # Mod修正箇所
	}

	planet = {
		class = star
		orbit_distance = 0
		orbit_angle = 0
	}

	change_orbit = 45

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_I"
		orbit_angle = -30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_I"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "NAME_Alpha_Complex"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			###
			# ここからMod追加コード
			# 以下のファイルのcreate_country_effectの部分を拝借
			# common\fallen_empires\00_fallen_empire.txt
			###
			create_species = {
				name = random
				class = MACHINE
				namelist = MACHINE3
				portrait = random
				traits = {
					trait = trait_machine_unit
					trait = random_traits
				}
				extra_trait_points = 3
				allow_negative_traits = no
			}
			create_country = {
				name = random
				type = fallen_empire
				ignore_initial_colony_error = yes
				authority = auth_machine_intelligence
				civics = {
					civic = civic_machine_remnants
					civic = civic_custodian_directives
				}
				species = last_created_species
				ethos = {
					ethic = ethic_gestalt_consciousness
				}
				flag = random
				origin = "origin_fallen_empire"
				effect = {
					save_global_event_target_as = fallen_empire_machine
					set_country_flag = fallen_empire_machine
					add_resource = {
						minerals = 10000
						energy = 10000
						food = 1000
						influence = 500
					}
					if = {
						limit = { host_has_dlc = "Apocalypse" }
						give_technology = {
							tech = tech_colossus
							message = no
						}
					}
					# must initialize global designs here
					add_global_ship_design = "NAME_Omega"
					add_global_ship_design = "NAME_Alpha"
					add_global_ship_design = "NAME_Beta"
					add_global_ship_design = "NAME_Gamma"
					add_global_ship_design = "NAME_Theta"
					add_global_ship_design = "NAME_Tau"
					add_global_ship_design = "NAME_Sigma"
					add_global_ship_design = "NAME_FE_Starbase"
				}
			}
			###
			# ここまでMod追加コード
			###

			create_cluster = {
				id = fe_mach_cluster
				radius = 80
				center = this.solar_system
			}

			set_planet_flag = fallen_empire_world
			set_planet_flag = fallen_empire_capital
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_machine
			set_controller = event_target:fallen_empire_machine
			set_capital = yes

			add_building = building_ancient_control_center
			add_building = building_nourishment_center
			add_building = building_fe_assembly_2
			add_building = building_ancient_cryo_chamber
			add_building = building_fe_stronghold
			add_building = building_fe_administration_machine_2
			add_building = building_fe_lab_2
			add_building = building_fe_lab_2
			add_building = building_dimensional_fabricator
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_fe_silo_2

			while = {
				count = 5
				add_district = district_rw_science
			}
			while = {
				count = 5
				add_district = district_rw_nexus
			}
			while = {
				count = 105
				create_pop = {
					species = owner_main_species
				}
			}
			create_fallen_empire_starting_navy = yes

			while = {
				count = 20
				create_army = {
					name = random
					owner = event_target:fallen_empire_machine
					species = event_target:fallen_empire_machine
					type = "machine_assault_2"
				}
			}
		}
	}

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_II"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_II"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "NAME_Production_Unit"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_machine

			add_building = building_ancient_control_center
			add_building = building_fe_administration_machine_2
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_dimensional_fabricator
			add_building = building_fe_mine_2
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge
			add_building = building_nano_forge

			while = {
				count = 5
				add_district = district_rw_nexus
			}
			while = {
				count = 50
				create_pop = {
					species = owner_main_species
				}
			}
		}
	}

	planet = {
		class = "pc_ringworld_tech"
		name = "NAME_Circuit_III"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_seam"
		name = "NAME_Superstructure_III"
		orbit_angle = 30
		orbit_distance = 0
	}

	planet = {
		class = "pc_ringworld_habitable"
		name = "NAME_Processing_Unit"
		orbit_angle = 30
		orbit_distance = 0
		deposit_blockers = none
		modifiers = none

		init_effect = {
			set_planet_flag = fallen_empire_world
			prevent_anomaly = yes
			set_owner = event_target:fallen_empire_machine

			add_building = building_ancient_control_center
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_class_4_singularity
			add_building = building_fe_assembly_2
			add_building = building_fe_mine_2
			add_building = building_fe_mine_2
			add_building = building_fe_mine_2

			while = {
				count = 5
				add_district = district_rw_generator
			}
			while = {
				count = 22
				create_pop = {
					species = owner_main_species
				}
			}
		}
	}

	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_machine_2"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_machine_3"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_machine_4"
	}
	neighbor_system = {
		distance = { min = 0 max = 50 }
		initializer = "fallen_machine_5"
	}
}

static_fallen_machine_2 = {
	class = "rl_standard_stars"
	name = "NAME_Beta_Refuge"
	usage_odds = 0 # Mod追加コード

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 4
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			create_ambient_object = {
				type = "small_debris_object"
				entity_offset_height = { min = -0 max = -25 }
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 45
					angle = random
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 0
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 90
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 180
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 270
			orbit_distance = 45
		}

		while = {
			count = 3
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}

		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_machine } # Mod修正箇所
	}
}

static_fallen_machine_3 = {
	class = "rl_standard_stars"
	name = "NAME_Gamma_Refuge"
	usage_odds = 0 # Mod追加コード

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {

			while = {
				count = 4
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 2
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			create_ambient_object = {
				type = "small_debris_object"
				entity_offset_height = { min = -0 max = -25 }
				location = this
			}
			last_created_ambient_object = {
				set_location = {
					target = prev
					distance = 45
					angle = random
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 0
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 90
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 180
			orbit_distance = 45
		}
		spawn_megastructure = {
			type = "ring_world_ruined"
			orbit_angle = 270
			orbit_distance = 45
		}

		while = {
			count = 3
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 2
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		create_ambient_object = {
			type = "small_debris_object"
			location = solar_system
		}

		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_machine } # Mod修正箇所
	}

	change_orbit = 45
}

static_fallen_machine_4 = {
	class = "rl_standard_stars"
	name = "NAME_Delta_Refuge"
	usage_odds = 0 # Mod追加コード

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 15
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 25
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 30
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		while = {
			count = 15
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 25
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 25
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		while = {
			count = 30
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
		}

		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_machine } # Mod修正箇所
	}
}

# Custodian Nexus
static_fallen_machine_5 = {
	class = sc_black_hole

	name = "NAME_Custodian_Nexus"
	usage_odds = 0 # Mod追加コード

	planet = {
		class = star
		orbit_distance = 0

		init_effect = {
			while = {
				count = 30
				create_ambient_object = {
					type = "large_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 50
				create_ambient_object = {
					type = "medium_debris_01_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 50
				create_ambient_object = {
					type = "medium_debris_02_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
			while = {
				count = 100
				create_ambient_object = {
					type = "small_debris_object"
					entity_offset_height = { min = -0 max = -25 }
					location = this
				}
				last_created_ambient_object = {
					set_location = {
						target = prev
						distance = 45
						angle = random
					}
				}
			}
		}
	}

	change_orbit = 45

	init_effect = {
		every_system_planet = {
			clear_deposits = yes
		}
		while = {
			count = 30
			create_ambient_object = {
				type = "large_debris_object"
				location = solar_system
			}
		}
		while = {
			count = 50
			create_ambient_object = {
				type = "medium_debris_01_object"
				location = solar_system
			}
		}
		while = {
			count = 50
			create_ambient_object = {
				type = "medium_debris_02_object"
				location = solar_system
			}
		}
		while = {
			count = 100
			create_ambient_object = {
				type = "small_debris_object"
				location = solar_system
			}
		}

		static_create_fe_outpost = { COUNTRY = event_target:fallen_empire_machine } # Mod修正箇所
	}
}
